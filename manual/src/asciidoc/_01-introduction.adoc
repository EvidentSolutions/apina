== Introduction

Apina is a tool for creating client-side TypeScript code automatically from your Spring MVC controllers and Jackson
classes. If analyzes normal Spring / Jackson annotations, builds a model of your API and emits TypeScript code
targeting either Angular or Fetch API.

=== Simple example

Consider the following Spring controller:footnote:[Throughout the documentation I've used Kotlin for brevity, but Apina
works perfectly with Java as well.]

[source,kotlin]
----
package hello

@RestController
class HelloController {

    @GetMapping(
    fun greet(@RequestParam name: String) =
        GreetingResponse(greeting = "Hello, $name!", mood = Mood.HAPPY)

    enum class Mood { HAPPY, SAD }

    class GreetingResponse(val greeting: String, val mood: Mood)

}
----

Apply Apina's Gradle plugin:

[source,kotlin]
[subs="verbatim,attributes"]
----
plugins {
    id "fi.evident.apina" version "{revnumber}"
}

apina {
    // Specify the output-file that Apina generates
    target = new File(project(":frontend").projectDir, 'gen/apina-api.ts')

    // Specify regexes matching our controllers so that Apina
    // does not need to load all classes in classpath
    endpoints = listOf("""hello\..+""")
}
----

Import `ApinaModule` in your Angular module:

[source,typescript]
----
import { ApinaModule } from '../gen/apina-api';

@NgModule({
    imports: [
        ...
        ApinaModule
    ],
    ...
})
class MyModule { }
----

Finally, use inject service generated by Apina and use it your own code:

[source,typescript]
----
import { HelloEndpoint, GreetingResponse } from '../gen/apina-api';

@Component({
    ...
})
class MyComponent {

    readonly greetingResponse: Observable<GreetingResponse>;

    constructor(helloEndpoint: HelloEndpoint) {
        this.greetingResponse = helloEndpoint.greet("world");
    }
}
----
