== Introduction

Consider the following Spring controller:footnote:[Throughout the documentation I've used Kotlin for brevity, but Apina
works perfectly with Java as well.]

[source,kotlin]
----
package hello

@RestController
class HelloController {

    @GetMapping(
    fun greet(@RequestParam name: String) =
        GreetingResponse(greeting = "Hello, $name!", mood = Mood.HAPPY)

    enum class Mood { HAPPY, SAD }

    class GreetingResponse(val greeting: String, val mood: Mood)

}
----

To generate TypeScript code from the controller, apply Apina's Gradle plugin:
footnote:[Again this is Kotlin, but using Groovy is similar enough.]

[source,kotlin]
[subs="verbatim,attributes"]
----
plugins {
    id("fi.evident.apina") version "{revnumber}"
}

tasks.apina {
    // Output file that Apina generates
    target.set(project(":frontend").layout.projectDirectory.file("gen/apina-api.ts"))

    // Generate code for Angular
    platform.set(Platform.ANGULAR)

    // Regex matching our controller classes
    endpoints.set(listOf("""hello\..+"""))
}
----

Next, import generated `ApinaModule` from your Angular module:

[source,typescript]
----
import { ApinaModule } from '../gen/apina-api';

@NgModule({
    imports: [
        ...
        ApinaModule
    ],
    ...
})
class MyModule { }
----

Finally, inject the service generated by Apina and use it your own code:

[source,typescript]
----
import { Component } from "@angular/core";
import { HelloEndpoint, GreetingResponse } from '../gen/apina-api';

@Component({
    selector: 'my-greeting',
    template: `<span *ngIf="response$ | async as response">{{response.greeting}}</span>`
})
class MyGreetingComponent {

    readonly response$: Observable<GreetingResponse>;

    constructor(helloEndpoint: HelloEndpoint) {
        this.response$ = helloEndpoint.greet("world");
    }
}
----

That's it! Based on Jackson's object mapping rules, Apina generates model types and metadata for
handling JSON serialization on the TypeScript side. Similarly, based on Spring's annotations, Apina
generates endpoint classes that execute HTTP requests and marshals the data.
